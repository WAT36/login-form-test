(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{2291:(e,a,s)=>{Promise.resolve().then(s.bind(s,3240))},3240:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var r=s(5155),o=s(9137),t=s.n(o),n=s(2115),d=s(3119);let i=new d.NE({UserPoolId:"ap-northeast-1_d677C74Sm",ClientId:"344tsl4dsqtcihjb8jhpip4ots"});var l=s(5695);function c(){let[e,a]=(0,n.useState)(""),[s,o]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[p,x]=(0,n.useState)(!1),[m,g]=(0,n.useState)(null),[b,h]=(0,n.useState)(""),j=(0,l.useRouter)();return(0,r.jsxs)("div",{style:{padding:"2rem"},className:"jsx-24e5ae904199f405",children:[(0,r.jsx)("h1",{className:"jsx-24e5ae904199f405",children:"ログイン"}),p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"password",placeholder:"新しいパスワード",value:c,onChange:e=>u(e.target.value),className:"jsx-24e5ae904199f405"}),(0,r.jsx)("button",{onClick:()=>{m&&m.completeNewPasswordChallenge(c,{},{onSuccess:e=>{h("パスワード変更＆ログイン成功！"),x(!1),localStorage.setItem("idToken",e.getIdToken().getJwtToken()),j.push("/mypage")},onFailure:e=>{console.error("パスワード変更失敗:",e),h("パスワード変更失敗: "+e.message)}})},className:"jsx-24e5ae904199f405",children:"パスワード変更してログイン"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{placeholder:"ユーザー名",value:e,onChange:e=>a(e.target.value),className:"jsx-24e5ae904199f405"}),(0,r.jsx)("input",{type:"password",placeholder:"パスワード",value:s,onChange:e=>o(e.target.value),className:"jsx-24e5ae904199f405"}),(0,r.jsx)("button",{onClick:()=>{let a=new d.TU({Username:e,Pool:i}),r=new d.By({Username:e,Password:s});a.authenticateUser(r,{onSuccess:e=>{h("ログイン成功！"),console.log("ID Token:",e.getIdToken().getJwtToken()),localStorage.setItem("idToken",e.getIdToken().getJwtToken()),j.push("/mypage")},onFailure:e=>{console.error("ログイン失敗:",e),h("ログイン失敗: "+e.message)},newPasswordRequired:()=>{x(!0),g(a),h("新しいパスワードが必要です")}})},className:"jsx-24e5ae904199f405",children:"ログイン"})]}),(0,r.jsx)("p",{className:"jsx-24e5ae904199f405",children:b}),(0,r.jsx)(t(),{id:"24e5ae904199f405",children:".container.jsx-24e5ae904199f405{max-width:400px;margin:80px auto;padding:2rem;border:1px solid#ddd;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 4px 8px rgba(0,0,0,.05);-moz-box-shadow:0 4px 8px rgba(0,0,0,.05);box-shadow:0 4px 8px rgba(0,0,0,.05);text-align:center;font-family:sans-serif}h1.jsx-24e5ae904199f405{margin-bottom:1.5rem}input.jsx-24e5ae904199f405{display:block;width:100%;padding:.8rem;margin:.5rem 0;font-size:1rem;border:1px solid#ccc;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px}button.jsx-24e5ae904199f405{width:100%;padding:.8rem;background-color:#0070f3;color:white;font-size:1rem;border:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;margin-top:1rem;cursor:pointer;-webkit-transition:background-color.2s ease;-moz-transition:background-color.2s ease;-o-transition:background-color.2s ease;transition:background-color.2s ease}button.jsx-24e5ae904199f405:hover{background-color:#005ac1}p.jsx-24e5ae904199f405{margin-top:1rem;color:#e00}"})]})}},5682:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[294,441,684,358],()=>a(2291)),_N_E=e.O()}]);